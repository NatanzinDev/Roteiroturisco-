<!DOCTYPE html>

<html>
<head>
<title>#{get 'title' /}</title>
<meta charset="${_response_encoding}">
<link rel="stylesheet" media="screen"
	href="@{'/public/stylesheets/main.css'}">
#{get 'moreStyles' /}
<link rel="shortcut icon" type="image/png"
	href="@{'/public/images/favicon.png'}">
<link rel="stylesheet" media="screen"
	href="@{'/public/stylesheets/inicio.css'}">
<link
	href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css"
	rel="stylesheet">

<style type="text/css">
/* --- CSS Existente --- */
.user-info p {
	display: flex;
	align-items: center;
	gap: 15px;
	margin: 0;
	font-weight: 500;
	color: #333;
}

.user-info p a {
	background-color: #e44d3a;
	color: white !important;
	padding: 8px 16px;
	border-radius: 6px;
	text-decoration: none;
	font-weight: 500;
	transition: background-color 0.3s ease;
}

.user-info p a:hover {
	background-color: #c0392b;
	color: white !important;
}

.main-nav {
	display: flex;
	align-items: center;
	gap: 25px;
}

.main-nav .user-nav-info {
	display: flex;
	align-items: center;
	gap: 12px;
	margin: 0;
	padding-left: 25px;
	border-left: 1px solid #ddd;
	font-weight: 500;
	color: #333;
}

.main-nav .user-nav-info a {
	background-color: transparent;
	color: #e44d3a;
	padding: 6px 12px;
	border: 1px solid #e44d3a;
	border-radius: 5px;
	text-decoration: none;
	font-size: 0.9em;
	font-weight: 600;
	transition: all 0.3s ease;
}

.main-nav .user-nav-info a:hover {
	background-color: #e44d3a;
	color: white;
}

/* --- NOVO CSS PARA O CARRINHO --- */
.cart-btn {
    position: relative;
    display: flex;
    align-items: center;
    justify-content: center;
    color: #333;
    text-decoration: none;
    transition: color 0.3s;
}

.cart-btn:hover, .cart-btn.active {
    color: #005A8D;
}

/* O Badge (contador) vermelho */
.cart-badge {
    position: absolute;
    top: -8px;
    right: -10px;
    background-color: #e44d3a;
    color: white;
    font-size: 0.7rem;
    font-weight: bold;
    min-width: 18px;
    height: 18px;
    border-radius: 50%;
    display: flex;
    align-items: center;
    justify-content: center;
    border: 2px solid white;
}
</style>
</head>
<body>
	<header class="main-header">
		<div class="container">
			<a href="#" class="logo">Gostoso Destinos</a>
			<nav class="main-nav">
				<a href="@{Pacotes.inicio}" class="${request.actionMethod == 'inicio' ? 'active' : ''}">Home</a>
				
				#{if session['adm']}
					<a href="@{Pacotes.listaadm}" class="${request.actionMethod == 'listaadm' ? 'active' : ''}">Controle de pacotes</a>
				#{/if}
				
				<a href="@{Pacotes.lista}" class="${request.actionMethod == 'lista' ? 'active' : ''}">Pacotes</a>
				
                <a href="@{Carrinho.detalhes()}" class="cart-btn ${request.controller == 'Carrinho' ? 'active' : ''}" title="Meu Carrinho">
                    <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" fill="currentColor" viewBox="0 0 16 16">
                        <path d="M0 1.5A.5.5 0 0 1 .5 1H2a.5.5 0 0 1 .485.379L2.89 3H14.5a.5.5 0 0 1 .491.592l-1.5 8A.5.5 0 0 1 13 12H4a.5.5 0 0 1-.491-.408L2.01 3.607 1.61 2H.5a.5.5 0 0 1-.5-.5zM3.102 4l1.313 7h8.17l1.313-7H3.102zM5 12a2 2 0 1 0 0 4 2 2 0 0 0 0-4zm7 0a2 2 0 1 0 0 4 2 2 0 0 0 0-4zm-7 1a1 1 0 1 1 0 2 1 1 0 0 1 0-2zm7 0a1 1 0 1 1 0 2 1 1 0 0 1 0-2z"/>
                    </svg>
                    <span class="cart-badge">0</span>
                </a>

				#{if session['usuario']}
					<a href="@{Login.logout}">Logout</a>
					<a href="#">${session['usuario']}</a>
				#{/if}
			</nav>
		</div>
	</header>

	#{if flash.error}
	<div class="alert alert-danger alert-dismissible fade show"
		role="alert">
		<strong>Algo deu errado:</strong> ${flash.error}
		<button type="button" class="btn-close" data-bs-dismiss="alert"
			aria-label="Close"></button>
	</div>
	#{/if} #{if flash.success}
	<div class="alert alert-success alert-dismissible fade show"
		role="alert">
		<strong>Sucesso!</strong> ${flash.success}
		<button type="button" class="btn-close" data-bs-dismiss="alert"
			aria-label="Close"></button>
	</div>
	#{/if}

	<div>#{doLayout /}</div>
	<footer class="main-footer">
		<p>&copy; 2025 Gostoso Destinos. Todos os direitos reservados.</p>
	</footer>
	<script src="@{'/public/javascripts/jquery-1.6.4.min.js'}"
		type="text/javascript" charset="${_response_encoding}"></script>
	<script
		src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js"></script>

	#{get 'moreScripts' /}
</body>
</html>